<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Updade profile</title>
    <link rel="stylesheet" href="{% static 'css/editprofile.css'%}">
    
</head>
<body>
    <div class="container">
        <div class="container">
            <header> Profile Settings</header>
            <form method="post" action="{% url 'editProfile' %}"> <!--action : lien de la page qui reçoit les données envoyées par le formulaire-->
                {% csrf_token %} <!--pour chiffré le formulaire-->
                <label for="id_username">Nom d'utilisateur :</label>
                <input type="text" id="id_username" name="username" value="{{customer_info.username}}">
    
                <label for="id_firstname">Nom de famille :</label>
                <input type="text" id="id_firstname" name="firstname" value="{{customer_info.firstname}}">
    
                <label for="id_lastname">Prenom :</label>
                <input type="text" id="id_lastname" name="lastname" value="{{customer_info.lastname}}">
    
                <label for="id_birthdate">Date de naissance :</label>
                <input type="date" id="id_birthdate" name="birthdate"  onchange="changeDateFormat()">
    
                <label for="id_adress">Adresse :</label>
                <input type="text" id="id_adress" name="adress" value="{{customer_info.adress}}">
    
                <label for="id_email">Email :</label>
                <input type="email" id="id_email" name="email" value="{{ customer_info.email }}">
    
                <label for="id_phonenumber">Numéro de téléphone :</label>
                <input type="text" id="id_phonenumber" name="phonenumber" value="{{ customer_info.phonenumber }}">
    
                <label for="id_description">Description :</label>
                <div class="center">
                    <textarea id="id_description" name="description" value="{{customer_info.description}}"></textarea>
                </div>
                <button type="submit">Modifier le profile</button>
            </form>
        </div>
    </div>
</body>
<script>
    function formatDate(date) {
        const year = date.getFullYear();
        let month = (1 + date.getMonth()).toString().padStart(2, '0');
        let day = date.getDate().toString().padStart(2, '0');

        return `${year}-${month}-${day}`;
    }

    function changeDateFormat() {
        // Récupérer l'élément input de type date
        const input = document.getElementById('id_birthdate');

        // Récupérer la valeur de la date
        const dateValue = input.value;

        // Créer un objet Date à partir de la valeur de l'input
        const date = new Date(dateValue);

        // Formatage de la date dans le format YYYY-MM-DD
        const formattedDate = formatDate(date);

        // Affecter la date formatée à la valeur de l'input
        input.value = formattedDate;
    }
    function formatDateForDisplay(dateString) {
    // Séparer l'année, le mois et le jour
    const [year, month, day] = dateString.split('-');
    
    // Formater la date en DD/MM/YYYY
    return `${day}/${month}/${year}`;
    }
        // Récupérer l'élément input date
    const inputDate = document.getElementById('id_birthdate');

    // Récupérer la date de l'utilisateur au format YYYY-MM-DD
    const userDate = '{{customer_info.birthdate}}'; // Remplacez ceci par la date de l'utilisateur

    // Formater la date dans le format souhaité (DD/MM/YYYY)
    const formattedDate = formatDateForDisplay(userDate);

    // Attribuer la date formatée à l'attribut value de l'input date
    inputDate.value = formattedDate;
</script>
</html>